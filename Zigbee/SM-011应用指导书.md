# 		                                           SM - 011 应用指导书 



<img>![图片描述](https://github.com/junlin-chen/-/raw/master/LOGO.png)

**版本V1.0** 

**版权©2019** 





##                                                                                                                                                                                                                            	     关于本手册



 本手册介绍了SM-011应用指导书产品参数，包含以下章节。 

| 章     | **标题** | **内容**                   |
| :----- | :------- | :------------------------- |
| 第一章 | 产品简介 | 概述SM-011的特点和功能应用 |
| 第二章 | 电气特性 | 介绍模块的电气性能基本参数 |
| 第三章 | 管脚定义 | 提供管脚定义及管脚功能说明 |
| 第四章 | 功能描述 | 描述模块功能及具体说明     |
| 第五章 | 射频指标 | 介绍模块的射频指标         |
| 第六章 | PCB设计  | 描述PCB layout注意事项     |
| 第七章 | 封装信息 | 提供模块封装尺寸图         |







## 一、  产品简介																																		

​	

SM-011模块是深圳酷宅科技有限公司（简称：酷宅科技）基于Zigbee方案的超低功耗网关模块，拥有业内极富竞争力的封装尺寸和超低能耗技术，专为移动设备和物联网应用设计，可将用户的物理设备连接到Zigbee无线网络上，进行互联网或局域网通信，实现联网功能。

SM-011可用于智能锁，智能调光，网关，通断开关， ZigBee协调器、路由器、终端等应用领域等领。

​      

   **产品特性**

- 支持无线802.15.4 标准
- 支持Zigbee mesh网络
- 支持程序及协议开发
- 支持串口透传协议
- 支持远程控制 







## 二、电气特性



####      2.1、额定参数



                                      条件：VDD=3.3V±10%，GND=0V；室温25℃下测试。

| 类型         | 参数                                                  |
| ------------ | ----------------------------------------------------- |
| 型号         | SM-011                                                |
| 主芯片       | EFR32MG21                                             |
| 硬件接口     | 通用输入输出                                          |
| 工作电压     | 1.7 V~3.8 V                                           |
| GPIO驱动能力 | Max：50mA                                             |
| 工作电流     | 平均电流：< 1mA<br>最大工作电流：200mA<br>待机：< 8uA |
| 工作温度     | 0℃~45℃                                                |
| 存储环境体   | 温度：-10℃~75℃，相对湿度：20%RH~80%RH                 |
| 尺寸大小     | 16mm×22mm×1.0mm                                       |
| 无线网络类型 | IEEE 802.15.4                                         |
| 安全机制     | AES                                                   |
| 加密类型     | AES-128                                               |
| 固件升级     | 支持                                                  |



####      2.2、网络参数  

                                             条件：VDD=3.3V±10%，GND=0V；室温 25℃下测试。 

|    类型    | 参数                            |
| :--------: | ------------------------------- |
|  无线标准  | IEEE 802.15.4                   |
|  频率范围  | 2.405 GHz-2.480 GHz             |
|  发射功率  | 20 dBm                          |
| 接收灵敏度 | -95 dBm                         |
|  天线类型  | 1、PCB板天线<br>2、IPEX外接天线 |







## 三、管脚定义



####      3.1、脚位排列顺序

SM-011模块提供网关透传串口，OTA升级控制接口。SM-011模块支持IPEX外接天线和PCB板载天线.



<img src="https://github.com/junlin-chen/-/raw/master/IMG_20191031_110215.png" alt="SM-011 Zigbee模块正面脚位图" style="zoom: 10%;" />

  																			SM-011 模块正面脚位图                                      

<img src="https://github.com/junlin-chen/-/raw/master/IMG_20191031_110248.png" alt="IMG_20191031_110248" style="zoom:10%;" />

                                                                 			SM-011 模块反面脚位图

<img src="https://github.com/junlin-chen/-/raw/master/IMG_20191031_115.jpg" style="zoom: 12%;" />

                                                                            SM-011  模块正面脚位图





####    3.2、管脚定义

                                                                             管脚定义及功能说明

| 管脚 | 名称     | 功能                         |
| ---- | -------- | ---------------------------- |
| 1    | GND      | 地线                         |
| 2    | PB01     | 网关透传串口TX               |
| 3    | PB00     | 网关透传串口RX               |
| 4    | PA00     | NC                           |
| 5    | PA01/TCK | NC                           |
| 6    | PA02/TMS | NC                           |
| 7    | PA03/TDO | NC                           |
| 8    | PA04/TDI | NC                           |
| 9    | PA05     | NC                           |
| 10   | PA06     | NC                           |
| 11   | VCC      | 模块电源                     |
| 12   | GND      | 地线                         |
| 13   | PD04     | NC                           |
| 14   | PD03     | NC                           |
| 15   | PD02     | NC                           |
| 16   | PD01     | NC                           |
| 17   | PD00     | NC                           |
| 18   | PC00     | NC                           |
| 19   | PC01     | NC                           |
| 20   | PC02     | NC                           |
| 21   | PC03     | NC                           |
| 22   | PC04     | NC                           |
| 23   | PC05     | NC                           |
| 24   | nRST     | 模块复位引脚，低电平模块复位 |





## 四、功能描述

#### 	

#### 4.1、模块功能

 SM-011模块主要用于建立一个ZigBee 3.0网络，数据ZigBee终端设备加入该网络后，可以通过透传指令进行本地或者远程控制.

功能说明：

1. 配置：使用协议指令进行添加或管理设备。以及数据的转发。
2. 数据采集：通过透传指令采集传感器类型ZigBee终端的数据，并将采集到的数据上报，如ZigBee温湿度传感器模块。。
3. 设备控制：通过透传指令控制已经添加到网关的ZigBee终端控制设备，如ZigBee开关等。



#### 4.2、ZigBee设备的接入流程

##### 4.2.1、温湿度设备接入网关流程

1. 使用《协调器API接口文档_网关端.xlsx》中sheet页“网络管理命令”里的【2.1】指令打开网络，设置超时时间60s。

2. 子设备入网后串口端会收到【2.2】的设备信息上报，网关保存MAC和设备网络地址。

3. 网关使用【3.3】指令查询设备端点（指令中端点填写0x00）。

4. 收到查询端点回应后保存端点信息（端点0x01）,并调用【2.4】查询每个端点的设备类型。

5. 判断设备类型为0x0302，然后解析后续的设备属性，如果里面包含0x0402的温度属性则先发送【2.7】指令绑定（源MAC为设备端的MAC，目的MAC为协调器的MAC），然后发送sheet页“通用传感器标准命令”里的【11.6】的温度推送配置。湿度（0x0405）和电池电量(0x0001)也是先发送绑定，然后再发送对应的配置。

6. 此时网关可以在温度发生变化时收到【11.7】的温度变化推送通知。

   

##### 4.2.2、水浸、门磁、PIR设备接入流程

1. 使用《协调器API接口文档_网关端.xlsx》中sheet页“网络管理命令”里的【2.1】指令打开网络，设置超时时间60s。

2. 子设备入网后串口端会收到【2.2】的设备信息上报，网关保存MAC和设备网络地址。

3. 网关使用【3.3】指令查询设备端点（指令中端点填写0x00）。

4. 收到查询端点回应后保存端点信息（端点0x01）,并调用【2.4】查询每个端点的设备类型。

5. 判断设备类型为0x0402（IAS Zone），则需要使用sheet页“ZCL通用属性操作命令”里的【3.1】读取设备属性，设备类型有：

   Motion Sensor（0x000d）,
   Contact Switch（0x0015），
   Water Sensor（0x002a）；

   同时如果支持电池电量(0x0001)则配置电池电量（绑定和推送配置）。

6. 如果发生报警则通过使用sheet页“安防类传感器标准命令”里的【9.3】指令推送报警消息。消息数据在设备状态（16bit）的最低一个bit表示（一定要按bit判断，其他bit有其他用途！！！切记）。

   

#### 4.3、其他

1. 如果需要在配置完成后读取状态则需要使用sheet页“ZCL通用属性操作命令”里的【3.1】读取设备属性的协议查询当前的属性。
2. 以上设备的配置流程必须在2分钟之内配置完毕，否则子设备将进入深度休眠而不接收协调器下发的指令数据。



## 五、射频指标

| 描述     | 最小值  | 最大值 | 单位 |
| :------- | :-----: | :----: | :--: |
| 灵敏度   |   18    |   20   | dBm  |
| 邻频抑制 |   -95   |  -105  |  dB  |
| 频偏     |   -15   |  +40   | KHz  |
| EVM      | 少于20% |        |      |











## 六、PCB设计

**PCB layout 与模块布局** ：

1. 在 PCB layout 时注意模块摆放位置，特别是模块的天线部分，尽可能远离干扰源： 磁性元件(如马    

   达、电感、变压器等)、高频信号器件（如晶振、高频时钟信号等）。

2. 模块的1PIN 、24PIN到天线部分对应到PCB板的区域可做挖空处理。模块底部对应PCB板的上下层尽可能不走任何走线 。

3.  模块的VCC供电的电源引脚的电容尽可能靠近模块的引脚摆放。



## 七、封装信息

​	

           模块封装尺寸图:

![](https://github.com/junlin-chen/-/raw/master/fengzhuang.png)





​	







------





![图片描述](https://github.com/junlin-chen/-/raw/master/Zigbee 版权专用 LOGO.bmp)

