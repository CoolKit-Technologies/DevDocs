# 		                                           GSB-D04 应用指导书 



<img>![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/LOGO.bmp)

**版本V1.0** 

**版权©2019** 





##                                                                                                                                                                                                                            	     关于本手册



             本手册介绍了GSB- D04模块 产品特性、产品展示、产品功能描述、硬件介绍、射频天线、尺寸的介绍，

包含以下章节。 

| **章** | **标题**     | **内容**                                     |
| ------ | ------------ | -------------------------------------------- |
| 第1章  | 概述         | 概述功能特点和应用                           |
| 第2章  | 产品特性     | 描述模块的特性参数                           |
| 第3章  | 产品功能描述 | GSM状态灯示图、状态解释、工作流程、功能介绍  |
| 第4章  | 硬件介绍     | 列出了基本参数、管脚定义、接线方法、电路参考 |
| 第5章  | 射频天线     | 提供射频电路推荐设计、天线的选型             |
| 第6章  | 尺寸图       | 提供了产品的尺寸图、PCB 封装参考设计         |





## 一、  产品简介																																		

​	

       GSB-D04是深圳酷宅科技有限公司（简称：酷宅科技）开发的一款用于4通道开关控制器的模块，以其低功

耗、紧凑设计和高稳定性满足客户需求。

      GSB-D04模块是一个四频的GSM/GPRS模块，工作的频段为：GSM850MHz，EGSM900MHz，DCS1800MHz

和PCS1900MHz，支持GPRS multi-slot class 12和 GPRS 编码格式 CS- 1, CS- 2, CS- 3 and CS- 4。模块尺寸是

20mm x 20mm x 2.8 mm，可以满足用户应用中的对空间尺寸的要求，可以被集成到任何需要通过蜂窝网络进行

语音通话或者数据传输的系统或产品中去。模块的物理接口为58个贴片焊盘，具有常用的硬件接口，支持广泛的

功能应用。

​      





## 二、产品特性

####           

####            2.1、模块性能

                                                                         模块性能说明

| 特性            | 说明                                                         |
| --------------- | ------------------------------------------------------------ |
| 供电            | 3.3V ~ 4.6V （推荐电压3.8V）                                 |
| 频段            | 1、四频：GSM850，EGSM900，DCS1800 ，PCS1900。<br>2、模块可自动搜寻频率。<br>3、符合 GSM Phase 2/2+。 |
| 发射功率        | 1、Class 4（2W）：GSM850，EGSM900。<br>2、Class 1（1W）：DCS1800，PCS1900。 |
| 温度范围        | 1、工作温度范围：-40°C to +80°C<br>2、存储温度：-40°C to +125°C |
| GPRS 数据特性   | 1、GPRS 数据下行传输：最大 85.6 kbps<br>2、GPRS 数据上行传输：最大 85.6kbps<br>3、 编码格式：CS-1，CS-2，CS-3 和 CS-4<br>4、支持通常用于 PPP 连接的 PAP（密码验证协议）协议<br>5、内嵌 TCP/IP 协议<br>6、支持非结构化补充数据业务 (USSD) |
| SIM 卡接口      | 支持 SIM 卡：1.8V，3V                                        |
| 天线接口        | 天线焊盘                                                     |
| 串口和调试口    | 1、 主串口<br>2、 调试串口<br>3、 辅助串口                   |
| 通讯录管理      | 支持类型：SM, FD, LD, RC, ON, MC.                            |
| SIM 应用工具包  | 支持 SAT class 3, GSM 11.14 Release 99                       |
| 实时时钟（RTC） | 支持                                                         |
| 物理尺寸        | 尺寸：20mm x 20mm x 2.8mm                                    |

                                

####               2.2、编码格式及速率   

| 编码格式 | 1 Timeslot | 2 Timeslot | 4 Timeslot |
| -------- | ---------- | ---------- | ---------- |
| CS-1:    | 9.05kbps   | 18.1kbps   | 36.2kbps   |
| CS-2:    | 13.4kbps   | 26.8kbps   | 53.6kbps   |
| CS-3:    | 15.6kbps   | 31.2kbps   | 62.4kbps   |
| CS-4:    | 21.4kbps   | 42.8kbps   | 85.6kbps   |

#### 

####2.3、**模块的工作频段**

| 频段    | 接收          | 发射          |
| ------- | ------------- | ------------- |
| GSM850  | 869～894MHz   | 824～849MHz   |
| EGSM900 | 925～960MHz   | 880～915MHz   |
| DCS1800 | 1805～1880MHz | 1710～1785MHz |
| PCS1900 | 1930～1990MHz | 1850～1910MHz |



#### 2.4、绝对最大值

| 参数 | 最小  | 最大 | 单位 |
| ---- | ----- | ---- | ---- |
| VBAT | 3.3   | 4.6  | V    |
| IBAT | 0     | 3    | A    |
| Vio  | - 0.3 | 3.0  | V    |
| Ii   | -     | 8    | mA   |
| Io   | -     | 8    | mA   |



#### 2.5、额定值

| 参数                     | 条件           | 最小 | 典型   | 最大 | 单位 |
| ------------------------ | -------------- | ---- | ------ | ---- | ---- |
| VBAT                     | 最小与最大之间 | 3.3  | 3.8    | 4.6  | V    |
| VPAD                     | 电压工作范围   | 2.6  | 2.8    | 3.0  | V    |
| Vio                      | 电压工作范围   | 2.6  | 2.8    | 3.0  | V    |
| I BAT（平均电流）        | 掉电模式       | -    | -      | 30   | uA   |
| 待机模式                 | -              | -    | 20     | mA   |      |
| 数传模式：EGSM900DSC1800 | --             | --   | 440280 | mA   |      |
| I BAT                    | 峰值电流       | 1.6  | 1.7    | 2    | A    |





## 三、产品功能描述



####      3.1、GSM模块状态灯闪烁方式说明



                               GSM设备状态灯的闪烁方式表征设备当前的状态，具体状态包括以下六种：



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSB-D%20%E6%A8%A1%E5%9D%97%E7%9A%84%E7%BD%91%E7%BB%9C%E6%8C%87%E7%A4%BA%E7%81%AF%E6%B5%81%E7%A8%8B%E5%9B%BE.bmp)

                                                                   设备状态与GSM状态灯闪烁方式关系示意图



                   GSM状态灯的闪烁特征以2秒为一个周期，如图所示，高电平灯亮，低电平灯灭。各状态详解：

A. Normal : 设备正常工作，与云服务器连接正常。此时可以通过APP操控设备。在其它任何模式下，都无法通过

    APP操控设备。

B. No GPRS：设备无法连接到网络供应商的网络。

C. No Server：设备已经连接上网络，但是未连上服务器。

D. Unregistered：表示设备已经连上服务器，但是还没有被绑定到任何账户下。一般的，设备需要与易微联账号 

     绑定才可与云服务器通信。在易微联APP“添加设备”扫描设备附带的二维码可完成添加。

E. Upgrade：表示设备正在固件升级。

F. 设备尚未激活。GSM设备出厂时，为防止未知情况的流量消耗。需用户完成一次激活操作才可正常联网使用。



####    3.2、GSM模块的基本工作流程

   3.2.1、 配置

1. 激活：GSM设备出厂时，为防止未知情况的流量消耗。需用户完成一次激活操作才可正常联网使用。长按设

   备端激活按键5S，至设备进入上节所述B状态。

2. 注册：设备需要与易微联账号绑定才可与云服务器通信。在易微联APP“添加设备”扫描设备附带的二维码完成

   设备与账户绑定。



   3.2.2、上线

       设备模块从上电到连接服务器，需经历以下流程：

1. 搜索、连入网络服务商提供的网络。
2. 连接服务器。

   3. 注册设备信息。

   4. 获取设备应用参数，保持在线 。

       以上各个步骤，当连接/获取失败时，均有相应的退避策略和重连接机制。确保设备稳定、实时在线。

  

   3.2.3、 升级

      模块设备连接升级服务器，下载最新版本固件，实现设备的在线升级。



#### 3.3、功能特性

      出厂初始状态为关。支持本地开关和远程开关，支持扫二维码进行配置，支持定时和上电态配置。

    3.3.1、扫二维码进行配置。



    3.3.2、定时

      这个是最普通的定时设置，让用户可以设置这个设备的工作日程。比如那一天几点几分动或者关闭，或者每周

三几点几分启动或者关闭等。跟闹钟的设置类似，尤其是对重复在某些时刻要运行的设备，定时后使用起来非常方

便。

  

     3.3.3、上电状态配置

      上电状态分别有:上电保持、上电开、上电关。

      上电保持： 上电后保持上一次断电时开关的状态。

      上电开： 上电后开关默认是开启状态。

      上电关： 上电后开关默认是关闭状态。



                                                                             



## 四、硬件介绍

#### 	

#### 4.1、模块管脚说明

            模块管脚顺序图：  

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSB-D%E6%A8%A1%E5%9D%97%E5%BC%95%E8%84%9A%E5%9B%BE.bmp)





          模块管脚功能说明：

| 序号                                                         | **Pin** 脚名称 | 功能说明                                                     |
| ------------------------------------------------------------ | -------------- | ------------------------------------------------------------ |
| 1,16,35,41,42,44,<br>45,50,51,54,55,57,                      | GND            | 接地                                                         |
| 52，53                                                       | VBAT           | 直流电源供电，Vmax=4.6V，Vmin=3.3V，Vnorm=3.8V注：本模块是单电源供电。电源必须能提供足够的电流以保证在猝发模式时高达 2A 的峰值电流。 |
| 17                                                           | VRTC           | 实时时钟电源：当系统电源VBAT 掉电时,VRTC通过外部备用电池供电。当VBAT有电而且后备电池电压过低时给后备电池充电。Vmax=3.15V，Vmin=2.0V，Vnorm=3.0V<br>Iout(max)= 300uA，Iin=2 uA<br>注：如果使用，应该在VRTC引脚上接电池。否则 VRTC引脚保持悬空。 |
| 38                                                           | VPAD           | 2.8V I/O电源输出：Vmax=3.0V，Vmin=2.6V，Vnorm=2.8V<br>Iout(max)= 20mA<br>注：模块的IO电平均在2.8V，所以外部上拉电源可以选择VPAD。当模块处于关机状态下时，此电源也将关闭。所以可以在该脚连接LED作为模块开机指示。如果没有使用，保持悬空。 |
| 43                                                           | RF_ANT         | 天线接口                                                     |
| 58                                                           | PERKEY         | 通过拉低PWRKEY开启和关闭模块 ，内部已上拉。                  |
| 49                                                           | TX             | 烧录数据                                                     |
| 48                                                           | RX             | 烧录数据                                                     |
| 36                                                           | DTX            | 烧录/调试串口                                                |
| 37                                                           | DRX            | 烧录/调试串口                                                |
| 34                                                           | VSIM           | SIM卡电源，DC 1.8V/3.0V。                                    |
| 33                                                           | SIM_RST        | SIM卡复位信号                                                |
| 31                                                           | SIM_CLK        | SIM卡时钟信号                                                |
| 32                                                           | SIM_DIO        | SIM卡数据信号                                                |
| 19                                                           | RST            | 外部复位输入（低电平有效）<br>注：如果没有用到，可以保持悬空。 |
| 4                                                            | GPIO21         | 网络状态指示灯输出口（高电平点亮）                           |
| 5                                                            | GPIO23         | 通道1的开关控制输出管脚(高有效)。                            |
| 8                                                            | GPIO24         | 通道2的开关控制输出管脚(高有效)。                            |
| 15                                                           | GPIO25         | 通道3的开关控制输出管脚(高有效)。                            |
| 23                                                           | GPIO26         | 通道4的开关控制输出管脚(高有效)。                            |
| 22                                                           | GPIO27         | 通道1按键输入管脚（低有效），可控制GPIO23输出高低电平，外部需上拉，默认高电平。 |
| 24                                                           | GPIO28         | 通道2按键输入管脚（低有效），可控制GPIO24输出高低电平，外部需上拉，默认高电平。 |
| 25                                                           | GPIO30         | 通道3按键输入管脚（低有效），可控制GPIO25输出高低电平，外部需上拉，默认高电平。 |
| 27                                                           | GPIO32         | 通道4按键输入管脚（低有效），可控制GPIO26输出高低电平，外部需上拉，默认高电平。 |
| 2,3,6,7,9,10,11,12,13,<br>14,18,20,21,26,28,29,<br>30,39,40,46,47,56, | NC             | NC                                                           |



####      4.2、模块供电

            本模块采用VBAT单电源供电，电压范围为3.4V～4.5V。在特定情况下，比如连接网络过程，有10ms峰值

电流会增加到2A左右，有可能导致电压瞬间跌落。因此，电源必须能提供至少2A的电流。建议靠近模块VBAT接口

处增加一个储能电容。该电容推荐值为100µF，需用低ESR电容。建议采用一个100µF钽电容（低ESR)和一个(1µF

～10µF) 的陶瓷电容并联。PCB布局时，电容应尽可能靠近模块的VBAT引脚。

            下图是模块供电的参考设计电路。因为设计的输出为3.8V，所以也可以采用线性稳压器来实现。模块也可

以直接用3.7V的锂离子单电池供电。（特别注意：镍镉或者镍锰电池的最大电压会超过模块的绝对最大电压并且

损坏模块，所以在使用这类电池时要特别小心。）        

    	![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/MP2307%20%E5%BA%94%E7%94%A8%E7%94%B5%E8%B7%AF%E5%9B%BE.bmp)

​	                                                           模块供电参考电路



#### 4.3、模块开关机

    4.3.1、模块开机

       模块的开机由PWRKEY引脚控制，在PWRKEY引脚加低脉冲触发开机，用户可以通过把PWRKEY信号拉低然后

       拉高来开机。此引脚已在模块内部上拉。

       建议PWRKEY拉低的时间要大于1.5s。如果PWRKEY拉低的时间小于1s，模块无法正常开机。

   

   4.3.2、模块关机

       本模块支持以下三种关机方法：

      1、正常关机进程：使用PWRKEY引脚关机。

            用户通过把PWRKEY 信号拉低3s时间然后放开来关机。

      2、低压关机：一旦检测到VBAT电压低于阈值触发关机。

            模块会持续的监测 VBAT 上的电压，如果VBAT上的电压≤3.5V，模块进入掉电模式，只有RTC处于激活状  

            态。

      3、高温或者低温自动掉电：一旦检测到高温或者低温触发关机。



#### 4.4、**主要电源** 

            模块除VBAT之外，还有两路电源接口：VRTC，VPAD。

      4.4.1、VRTC 电源

            模块RTC(Real Time Clock)的供电，可以使用一个大电容或电池（可充电的和不可充电的）来完成。用户可

            以使用一颗纽扣电池或大电容直接接VRTC引脚。（如果未使用了RTC功能，VRTC引脚可以保持悬空。）

           ![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/RTC%E7%94%B5%E6%BA%90%E5%BA%94%E7%94%A8%E7%94%B5%E8%B7%AF.bmp)

                                                 RTC电源



           用户使用不可充电纽扣电池时，使用如图接法。

           用户使用可充电电池或大电容时，去掉二极管，直接连接VRTC引脚。

       **注：使用可充电电池方案，接外部电源供电时，VRTC是使用外部电源供电，同时为可充电电池充电。断**

              **电后，可充电电池继续为VRTC供电。**



      4.4.2、VPAD电源

           VPAD电源接口可以提供2.8V供电电压，输出电流可达20mA（最大值），可以用于外部设备的电平驱动或

其他应用。当模块处于关机状态下时，此电源也将关闭。

       **注：本模块的IO管脚电平均在2.8V，所以外部上拉电源可以选择VPAD。**



​	    





## 五、射频天线



#### 5.1、**射频电路推荐设计**

     本模块提供天线接口引脚，外部主板应该使用微带线或者其他类型的可以控制特征阻抗为50±10%欧姆的

射频走线与模块的天线引脚连接。

     模块的射频管脚是RF_ANT。LAYOUT时我们推荐使用π 型匹配电路 （3 颗器件的规格可以使用

0603/0402），默认的串联器件为0ohm，其他2颗不贴。在实际中，可以通过调整这个电路优化整机射频性能。

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/%CE%A0%E5%9E%8B%E7%94%B5%E8%B7%AF%E5%BA%94%E7%94%A8.bmp)

                                                                                      π 型匹配电路

       在PCB走线时，此射频走线控制50Ω±10% 。ST86的射频性能与此走线息息相关。在PCB板上，影响此走

线阻抗的因素有：

- 走线的宽度和厚度

- 介质介电常数和厚度 
- 焊盘的厚度
- 与地线的距离
- 附近的走线



     **例1：**

     2层PCB板，板厚：1.6mm

     如下图所示，白色的是ST86的50Ω 阻抗控制线。它走在表层，线宽43mil，离旁边的地（红色）的距离是

8mil，射频走线的正下方是它参考层，一般都是大片的地（蓝色）。射频走线的旁边都要有大片的铺铜，并且沿

着走线方向，尽量多的打上地孔。在射频走线和它的参考地旁边，不要有其他任何走线或器件。

                                                                     50Ω 阻抗控制线示图

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/50%E6%AC%A7%E5%A7%86%E9%98%BB%E6%8A%97%E6%8E%A7%E5%88%B6%E7%BA%BF%20%E6%9D%BF%E5%8E%9A1.6.bmp)



     50Ω 阻抗的理论计算：单位（mil）

                                                                    50Ω 阻抗的理论计算示图

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/50%CE%A9%E9%98%BB%E6%8A%97%20%E7%90%86%E8%AE%BA%E8%AE%A1%E7%AE%97%E5%9B%BE.bmp)



       Er1,T1,C1,C2,CEr参数一般有工厂确认，每个工厂的工艺和材质有略微差异，需要和板厂确认。

       H1为PCB厚度，W1为线宽，D1为线到旁边GND的距离。 实际生产中要考虑到误差的存在。



  **例2：**

  2层PCB，板厚1.0mm

  线宽是35mil，线到旁边的GND的间距是8mil。

                                                                 50Ω 阻抗控制线示图

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/50%E6%AC%A7%E5%A7%86%E9%98%BB%E6%8A%97%E6%8E%A7%E5%88%B6%E7%BA%BF%20%E6%9D%BF%E5%8E%9A1.0.bmp)



      50Ω 阻抗的理论计算：单位（mil）

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/50%CE%A9%E9%98%BB%E6%8A%97%20PCB%20%E6%9D%BF%E5%8E%9A1.0%E7%90%86%E8%AE%BA%E8%AE%A1%E7%AE%97%E5%9B%BE.bmp)



####     5.2、天线

         5.2.1、外置天线     

         外置天线设计比较简单，天线空间大，性能容易保证。此种天线多为SMA接口或IPEX接口。

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSM%E5%A4%96%E7%BD%AE%E5%A4%A9%E7%BA%BF%E5%AE%9E%E7%89%A9%E5%8F%82%E8%80%83%E5%9B%BE.bmp)

                                                                              外置天线实物图

         5.2.2、内置天线

            内置天线一般分为两种： PIFA天线和单极天线（mono-pole）， 内置天线有可能会在产品内部形成干扰等

潜在问题，在设计中就具有较多的要求。

            内置天线设计要点：

            ①　天线的位置（即辐射空间）：一般要求在角落或者靠边的地方，尽量远离磁性物体，比如喇叭、马达                        等

            ②　天线的空间：不同的频段（比如四频就需要比双频更大的空间），不同的样式具有不同的需求

            ③　天线的馈点设计（天线的连接焊盘）：与天线样式有关。

            注意：天线的馈点最好与天线厂工程师沟通后再进行设计。

            PIFA天线：PIFA天线在设计中，需要天线下方有参考地，通过参考地来加强天线的抗干扰能力，同时可以

很容易的达到SAR的设计要求。









## 六、尺寸图

​	

#### 6.1、模块实物、外形尺寸图

   

                                      ![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSB-D%20%E6%A8%A1%E5%9D%97%E6%AD%A3%E9%9D%A2%E5%AE%9E%E7%89%A9%E5%9B%BE.bmp)

                                                                                    

                                                                                       模块顶视图  



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSB-D%20%E6%A8%A1%E5%9D%97%E8%83%8C%E9%9D%A2%E5%AE%9E%E7%89%A9%E5%9B%BE.bmp)

                                           

                                                                                     模块低视图 



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSB-D%20%E6%A8%A1%E5%9D%97%E6%9C%BA%E6%A2%B0%E5%B0%BA%E5%AF%B8%E5%9B%BE.bmp)

​          

                                                                                    模块外形尺寸图 





####        6.2、模块封装尺寸图

​	

                     封装尺寸图：



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/GSB-D%20%E5%B0%81%E8%A3%85%E5%B0%BA%E5%AF%B8%E5%9B%BE.bmp)



​	



------





 

   



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/Zigbee%20%E7%89%88%E6%9D%83%E4%B8%93%E7%94%A8%20LOGO.bmp )