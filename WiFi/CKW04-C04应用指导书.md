# 		                                           CKW04-C04应用指导书 



<img>![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/LOGO.bmp)

**版本V1.0** 

**版权©2019** 





##                                                                                                                                                                                                                            	     关于本手册



​	            本手册介绍了CKW04-C04的产品参数，包含以下章节。 

| 章     | **标题**     | **内容**                    |
| :----- | :----------- | :-------------------------- |
| 第一章 | 产品简介     | 概述CKW04-C04的特点和功能   |
| 第二章 | 芯片管脚说明 | 介绍CKW04管脚功能和管脚定义 |
| 第三章 | 功能说明     | 介绍CKW04芯片所提供的功能   |
| 第四章 | 电气特性     | 介绍CKW04芯片电气参数       |
| 第五章 | WIFI射频指标 | 介绍CKW04芯片的射频指标     |
| 第六章 | 管脚定义     | 提供CKW04芯片管脚分布图     |
| 第七章 | 封装信息     | 提供CKW04芯片封装信息       |







## 一、  产品简介																																		

​	

​	        CKW04-C04是深圳酷宅科技有限公司（简称：酷宅科技）基于CKW04芯片方案开发的一款用于四通道智能

Wi-Fi开关的解决方案，以其低功耗、紧凑设计和高稳定性满足客户需求。CKW04-C04能够实现Wi-Fi的搜索连接，

网络服务器的通讯，手机app的控制等基本功能，实现远程控制，专为移动设备和物联网应用设计。



   **产品特性**

- 支持无线802.11 b/g/n 标准

- Wi-Fi @2.4 GHz，支持WPA/WPA2安全模式

- 802.11b 模式下+20.5dBm的最大输出功率

- UMA认证标准

- 支持通过APP控制和获取芯片RELAY管脚状态

- 支持MAC上传

- 支持兼容配对模式 / 快速配对模式

- 支持最多8个定时器操作，支持重复定时器操作

- 支持RSSI获取和上传

- 支持OTA升级

- 支持通过APP设置设备上电后默认RELAY管脚状态（高/低，或保存断电前状态）







## 二、芯片管脚说明



| 管脚 | 名称       | 功能                                                         |
| ---- | ---------- | ------------------------------------------------------------ |
| 1    | GPIO22     | NC                                                           |
| 2    | GPIO21     | Debug功能                                                    |
| 3    | GPIO20     | ADCD端口（芯片内部ADC端口）                                  |
| 4    | GPIO0      | 通道1继电器开关，高电平有效，上电默认低电平。                |
| 5    | GPIO1      | 通道4开关引脚，低电平有效。APP配置脚，当低电平>5S进入配置模式。 |
| 6    | GPIO2      | 通道4继电器开关，高电平有效，上电默认低电平。                |
| 7    | GPIO3      | 通道3继电器开关，高电平有效，上电默认低电平。                |
| 8    | GPIO4      | 通道2继电器开关，高电平有效，上电默认低电平。                |
| 9    | GPIO5      | NC                                                           |
| 10   | GPIO6      | RXD1 烧写固件、数据                                          |
| 11   | GPIO7      | TXD1 烧写固件、数据                                          |
| 12   | DVDDIO1    | VDD 3V3电源m                                                 |
| 13   | LDO_EN     | 高电平有效，低电平芯片停止工作，外部需上拉电阻10K电阻到3.3V，下拉100nF电容到地。 |
| 14   | GPIO8      | 4个通道的总开总关引脚，低电平有效。APP配置引脚，当低电平>5S进入配置模式。 |
| 15   | GPIO9      | NC                                                           |
| 16   | GPIO10     | Wi-Fi状态指示灯，低电平有效。                                |
| 17   | GPIO11     | 通道2开关引脚，低电平有效。APP配置脚，当低电平>5S进入配置模式。 |
| 18   | GPIO12     | 通道3开关引脚，低电平有效。APP配置脚，当低电平>5S进入配置模式。 |
| 19   | GPIO13     | 通道1开关引脚，低电平有效。APP配置脚，当低电平>5S进入配置模式。 |
| 20   | VDD33_USB  | USB 3V3电源                                                  |
| 21   | HSDP       | HSDP                                                         |
| 22   | HSDM       | HSDM                                                         |
| 23   | VDD33_DCDC | 模拟电源VDD 3V3                                              |
| 24   | VDDLX_DCDC | 串一个4.7uH 620mA电感连接到Pin25、37                         |
| 25   | VDD16_DCDC | DCDC 1V6                                                     |
| 26   | DVDD12     | 数字电源1.2V输入，下拉1uF电容到地。                          |
| 27   | DVDDIO3    | VDD 3V3电源                                                  |
| 28   | GPIO14     | NC                                                           |
| 29   | GPIO15     | NC                                                           |
| 30   | GPIO16     | NC                                                           |
| 31   | GPIO17     | NC                                                           |
| 32   | GPIO18     | NC                                                           |
| 33   | GPIO19     | NC                                                           |
| 34   | XTALI      | 晶振输入端                                                   |
| 35   | XTALO      | 晶振输出端                                                   |
| 36   | VDD33_SX   | 模拟电源VDD 3V3                                              |
| 37   | VDD16D     | 模拟电源VDD 1V6                                              |
| 38   | VDD33_SX   | 模拟电源VDD 3V3                                              |
| 39   | VDD33_RF   | 模拟电源VDD 3V3                                              |
| 40   | VDD33_RF   | 模拟电源VDD 3V3                                              |
| 41   | GND        | GND                                                          |
| 42   | NC         | NC                                                           |
| 43   | GND        | GND                                                          |
| 44   | GND        | GND                                                          |
| 45   | GND        | GND                                                          |
| 46   | RF_IO      | 但建议保留π型匹配网络对天线进行匹配                          |
| 47   | NC         | NC                                                           |
| 48   | NC         | NC                                                           |

​	      芯片底部散热焊盘为GND焊盘。







## 三、功能说明

​	

#### 3.1、Wi-Fi状态灯闪烁方式说明

       			设备端Wi-Fi状态灯的闪烁方式表征设备当前的网络工作状态，具体状态包括以下七种：

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/LED%E7%81%AF%E9%97%AA%E7%83%81%E8%AF%B4%E6%98%8E.bmp)

                                                        设备状态与Wi-Fi状态灯闪烁方式关系示意图



​	     Wi-Fi状态灯的闪烁特征以2秒为一个周期，如图所示，低电平灯亮，高电平灯灭。各状态详解：

A .  Normal : 设备正常工作，与云服务器连接正常。此时可以通过APP操控设备。在其它任何模式下，

      都无法通过 APP操控设备。

B .  NO Wifi：设备无法连接到无线路由器。

C .  No Server：设备已经连接上无线路由器，但是无法连接到服务器（就是通常理解下的“无法上网”）。

D . Unregistered：表示设备还没有被绑定到任何账户下。一般的，设备需要与易微联账号绑定才可与云服务器      

      通信。在易微联APP“添加设备”可完成绑定操作。

E .  Upgrade：表示设备正在固件升级。

F .  Setting G1：表示设备正处于兼容配对模式。配置模式用于设备获取移动终端APP提供的加入服务网络的必要

     信息，包括路由器ssid、password和服务器ip、端口号等。

G . Setting G2：表示设备正处于快速配对模式。配置模式用于设备获取移动终端APP提供的加入服务网络的必要

     信息，包括路由器ssid、password和服务器ip、端口号等。两种配置，设备获取相关信息的方式不同，详见下 

​     节所述。





#### 3.2、Wi-Fi模块的基本工作流程



​	I． 配置

​	      设备模块在未加入局域网时就是一个“信息孤岛”，设备端操作配合易微联APP设置，使设备获取加入服务

网络的必要信息，包括路由器ssid、password和服务器ip、端口号等。模块内置两种配置方式：

​	      1、兼容配对模式：移动终端作为station加入该AP组成局域网实现数据交互。快速配对模式（G状态，

​	      详情见3.1 Wi-Fi状态灯闪烁方式说明）下长按配置按键5S，设备进入兼容配对模式。点击易微联APP

       添加设备（iOS移动终端需在“设置”菜单内手动连接ssid：ITEAD-10000XXXX， password12345678

       的热Android终端无需此操作），输入家庭路由器的ssid和password，完成设备的上线准备工作。

​	      2、快速配对模式：此方式Wi-Fi模块处于混杂模式（Wi-Fi Promiscuous），通过空快速配对模式：此方

       式Wi-Fi模块处于混杂模式（Wi-Fi Promiscuous），通过空空抓包的形式获取移动终端发出的包含ssid

       和password等信息的加密报文。上节所述A~D任意一个状态内长按配置按键5S，设备进入快速配对模

       式。点击易微联APP添加设备，输入家庭路由器的ssid和password，完成设备的上线配置工作。

​	

​	II． 上线

​	      设备模块从上电到连接服务器，需经历以下流程：

​		1、加入所配置路由器，连接Internet。

​		2、连接服务器。

​		3、注册设备，绑定至易微联账户。

​		4、获取设备应用参数，保持在线 。

       以上各个步骤，当连接/获取失败时，均有相应的退避策略和重连接机制，确保设备稳定、实时在线。



​	III． 升级

        		模块设备连接升级服务器，下载更新至最新版本固件，实现设备的在线升级。





#### 3.3、定时器功能

       定时器功能通过APP配置，定时器分为以下4种:

1. 单次定时器：在指定时间执行操作。

2. 延时定时器：经过所设置的时间执行操作。

3. 循环定时器：周循环执行操作。

4. 重复定时器：日重复执行操作。

  



#### 3.4、定时功能说明

​	       CKW04-C04支持定时器操作，为了方便客户使用以及让其使用在更多的场景下，易微联APP提供了四种定时模式：

1. 单次定时：这个是最普通的定时设置，让用户可以设置这个设备的工作日程。比如那一天几点几分启动或者关

   闭，或者每周三几点几分启动或者关闭等。跟闹钟的设置类似，尤其是对重复在某些时刻要运行的设备，定时

   后使用起来非常方便。

2. 延时定时：延时是为了方便用户进行一次性快速的定时操作，比如在多久之后执行启动或者关闭的动作，可以

   非常方便的将某个设备打开后，让它运行一段时间然后关闭。本设备最多支持24小时的延时操作。

3. 循环定时：对于某些设备，为了可以更方便的在某个场景下使用，易微联推出的循环定时设置，可以让一个设

   备从某个时刻开始，不断循环做一个事情。比如，让鱼缸的打氧泵从现在开始，每一小时启动一次，每次打氧

   20分钟后关闭，然后重复自动循环，保证鱼缸的氧气充足而无需人工干预。			

4. 重复定时：重复定时是方便无需在次日进行同时间设置定时操作。比如，设定上班时间闹钟，时间设置好后，

   选择日期（日期天数为一周可选），闹钟就会在选择的日期内设定的时间开启。







## 四、CKW04电气特性

​		

#### 	1 . 硬件参数

| 类型     | 参数                                  |
| -------- | ------------------------------------- |
| 芯片型号 | CKW04                                 |
| 工作电压 | 2.1V~3.46V                            |
| 工作电流 | 平均电流：80mA<br>最大工作电流：345mA |
| 工作温度 | -0℃~45℃                               |
| 封装大小 | 6mm×6mm                               |

#### 	2 . WI-FI参数

| 类型       | 参数                                                         |
| ---------- | ------------------------------------------------------------ |
| 无线标准   | IEEE 802.11b/g/n                                             |
| 频率范围   | 2.412GHz-2.484GHz                                            |
| 发射功率   | 802.11b: +19±2dBm (@11Mbps)<br>802.11g: +16±2dBm (@54Mbps)<br>802.11n: +15±2dBm (@HT20,MCS7) |
| 接收灵敏度 | 802.11b: -88 dBm (@11Mbps ,CCK)<br>802.11g: -73.5 dBm (@54Mbps, OFDM)<br>802.11n: -72.5 dBm (MCS7) |
| 天线类型   | PCB板载天线，外置天线，IPEX接口天线，陶瓷贴片天线            |







## 五、WIFI射频指标



#### 	1 . 灵敏度

| 描述                          | 最小值 | 典型值 | 最大值 | 单位mA |
| ----------------------------- | ------ | :----: | ------ | :----: |
| CCK 1Mbps                     |        | -95.5  |        |  dBm   |
| CCK 11Mbps                    |        |  -88   |        |  dBm   |
| 6Mbps(1/2BPSK)                |        | -91.5  |        |  dBm   |
| 54Mbps(3/4 64-QAM)            |        | -73.5  |        |  dBm   |
| HT20，MCS7（65Mbps，72.2Mbps) |        | -72.5  |        |  dBm   |

#### 	2 . 邻频抑制

| 描述         | 最小值 | 典型值 | 最大值 | 单位mA |
| ------------ | ------ | :----: | ------ | :----: |
| OFDM，6Mbps  |        |   39   |        |   dB   |
| OFDM，54Mbps |        |   23   |        |   dB   |
| HT20，MCS0   |        |   38   |        |   dB   |
| HT20，MCS7   |        |   21   |        |   dB   |







## 六、CKW04管脚定义

​	

              ​	管脚定义如下图所示：



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/CKW04%E5%BC%95%E8%84%9A%E5%9B%BE.bmp)









## 七、CKW04封装信息



- 封装类型：QFN-48L

- 芯片尺寸大小：6mm x 6mm

  

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/CKW04%20PCB%20%E5%B0%81%E8%A3%85%E5%B0%BA%E5%AF%B8%E5%9B%BE.bmp)

​	



------





 

   



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/%E7%89%88%E6%9D%83%E8%AF%B4%E6%98%8E.bmp )