# 		                                           SMA-CTA 应用指导书 



<img>![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/LOGO.bmp)

**版本V1.0** 

**版权©2019** 





##                                                                                                                                                                                                                            	     关于本手册



             本手册介绍了SMA-CTA 应用指导书产品参数，包含以下章节。 

| 章     | **标题**     | **内容**                         |
| :----- | :----------- | :------------------------------- |
| 第一章 | 产品简介     | 概述SMA-CTA的特点和功能应用      |
| 第二章 | 电气特性     | 介绍模块的电气性能基本参数       |
| 第三章 | 管脚定义     | 提供管脚布局、定义及管脚功能说明 |
| 第四章 | 功能描述     | 描述模块功能及具体说明           |
| 第五章 | WIFI射频指标 | 介绍模块的射频指标               |
| 第六章 | PCB设计      | 描述PCB layout注意事项           |
| 第七章 | 封装信息     | 提供模块封装尺寸图               |







## 一、  产品简介																																		

​	

               SMA-CTA是深圳酷宅科技有限公司（简称：酷宅科技）一款SMA-CTA系列是一款高集成度的通用串口转Wi-Fi

透传模块，可以用于快速开发基于Wi-Fi的数据传输产品。SMA-CTA系列模块能实现Wi-Fi的搜索连接，网络服务器

的通讯，串口转Wi-Fi透传，手机APP的控制等基本功能，根据具体型号不同支持不同地区的服务器及各种手机端

控制。

        SMA-CTA可广泛应用于智能电网、智能交通、智能家具、手持设备、工业控制等领域。

​      

   **产品特性**

- 内置 32 位 MCU，可兼作应用处理器 
- 支持无线802.11 b/g/n 标准
- Wi-Fi @2.4 GHz，支持WPA/WPA2安全模式
- 802.11b 模式下+20.5dBm的最大输出功率
- 支持 UART 数据通信接口
- 支持丰富的 AT 指令
- 支持本地硬件控制
- 支持 Wi-Fi 远程控制 
- 支持兼容配对模式  / 快速配对模式
- 支持OTA升级







## 二、电气特性



####      2.1、额定参数

                                      条件：VDD=3.3V±10%，GND=0V；室温25°C下测试。

|     型号     | 类型                                                     |
| :----------: | :------------------------------------------------------- |
|     型号     | SMA-CTA                                                  |
|    主芯片    | ESP8285                                                  |
|   硬件接口   | UART，GPIO，                                             |
|   工作电压   | 2.7V~3.6V                                                |
| GPIO驱动能力 | Max：12mA                                                |
|   工作电流   | 平均电流：≈80mA，<br>最大工作电流：210mA<br>待机: <200uA |
|   工作温度   | 0℃~45℃                                                   |
|   存储环境   | 温度：-10℃~75℃，相对湿度：20%RH~80%RH                    |
| 无线网络类型 | STA/AP/STA+AP                                            |
|   安全机制   | WEP/WPA-PSK/WPA2-PSK                                     |
|   加密类型   | WEP64/WEP128/TKIP/AES                                    |
|   固件升级   | OTA 远程升级                                             |



####      2.2、Wi-Fi 参数  

                                             条件：VDD=3.3V±10%，GND=0V；室温 25°C 下测试。 

|    类型    | 参数                                                         |
| :--------: | ------------------------------------------------------------ |
|  无线标准  | IEEE 802.11b/g/n                                             |
|  频率范围  | 2.412GHz-2.484GHz                                            |
|  发射功率  | 802.11b: 20±2dBm (@11Mbps)<br>802.11g: 17±2dBm (@54Mbps)<br>802.11n: 14±2dBm (@HT20,MCS7) |
| 接收灵敏度 | 802.11b: -91 dBm (@11Mbps ,CCK)<br>802.11g: -75 dBm (@54Mbps, OFDM)<br>802.11n: -72 dBm (MCS7) |
|  天线类型  | PCB板天线                                                    |







## 三、管脚定义



####      3.1、脚位排列顺序

                                  SMA-CTA模块提供单通道开关控制接口，Wi-Fi指示灯接口，UART串口。



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/SMA%E6%A8%A1%E5%9D%97%E9%A1%B6%E5%B1%82%E8%84%9A%E4%BD%8D%E5%9B%BE.bmp)

                                                                                  模块引脚正面图



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/SMA%E6%A8%A1%E5%9D%97%E4%BD%8E%E5%B1%82%E8%84%9A%E4%BD%8D%E5%9B%BE.bmp)

                                                                                  模块引脚反面图



####    3.2、管脚定义

                                                                             管脚定义及功能说明

| 管脚 | 名称   | 功能                                                         |
| ---- | ------ | ------------------------------------------------------------ |
| 1    | 3V3    | 电源                                                         |
| 2    | TX     | 串口输入、波特率可调且仅支持19200（1位起始位，8位数据位，1位停止位，无校验位） |
| 3    | RX     | 串口输出、波特率可调且仅支持19200（1位起始位，8位数据位，1位停止位，无校验位） |
| 4    | GPIO15 | NC                                                           |
| 5    | GPIO4  | NC                                                           |
| 6    | GPIO5  | NC                                                           |
| 7    | GPIO12 | NC                                                           |
| 8    | GPIO2  | 可用作烧写闪存时UART1_TX                                     |
| 9    | TOUT   | ADC端口、NC                                                  |
| 10   | GPIO0  | 1、开关引脚，低电平有效<br>2、配网模块                       |
| 11   | E-D2   | NC                                                           |
| 12   | E-D3   | NC                                                           |
| 13   | GPIO14 | NC                                                           |
| 14   | GPIO13 | Wi-Fi状态指示灯，接LED灯串联限流电阻到3V3                    |
| 15   | GPIO16 | GPIO16、NC                                                   |
| 16   | GND    | GND                                                          |

  





## 四、功能描述



#### 4.1、模块功能

            SMA-CTA模块可作为一个通用串口转Wi-Fi透传模块，将外部串行通信的简单设备实现在网络上的通信。以 

       下是功能说明：

1. 配置方式：快速配对模式/兼容配对模式 。长按按键（IO0下拉，默认高电平）5s以上进入快速配对模式，在

   此状态下，再长按按键5s以上进入快速配对模式，两种状态都可以配置APP。配置方式具体说明见4.3。

2. 透传：作为APP端与外部MCU的桥梁，通过APP实现与服务器中心设备建立网络连接，可以自动完成串口到网

   络通信的转换，所有数据可透明的在APP用于设备间双向传输。



####      4.2、Wi-Fi状态灯闪烁方式说明

            设备端Wi-Fi状态灯的闪烁方式表征设备当前的网络工作状态，具体状态包括以下七种：

![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/LED%E7%81%AF%E9%97%AA%E7%83%81%E8%AF%B4%E6%98%8E.bmp)

​	                                                        设备状态与Wi-Fi状态灯闪烁方式关系示意图



​	     Wi-Fi状态灯的闪烁特征以2秒为一个周期，如图所示，低电平灯亮，高电平灯灭。各状态详解：

A .  Normal : 设备正常工作，与云服务器连接正常。此时可以通过APP操控设备。在其它任何模式下，

​           都无法通过 APP操控设备。

B .  NO Wifi：设备无法连接到无线路由器。

C .  No Server：设备已经连接上无线路由器，但是无法连接到服务器（就是通常理解下的“无法上网”）。

D . Unregistered：表示设备还没有被绑定到任何账户下。一般的，设备需要与易微联账号绑定才可与云服务器      

      通信。在易微联APP“添加设备”可完成绑定操作。

E .  Upgrade：表示设备正在固件升级。

F .  Setting G1：表示设备正处于兼容配对模式。配置模式用于设备获取移动终端APP提供的加入服务网络的必要

     信息，包括路由器ssid、password和服务器ip、端口号等。

G . Setting G2：表示设备正处于快速配对模式。配置模式用于设备获取移动终端APP提供的加入服务网络的必要

      信息，包括路由器ssid、password和服务器ip、端口号等。两种配置，设备获取相关信息的方式不同，详见下

​          节所述。



#### 4.3、Wi-Fi模块的基本工作流程



​	I． 配置

      	      设备模块在未加入局域网时就是一个“信息孤岛”，设备端操作配合易微联APP设置，使设备获取加入服务

网络的必要信息，包括路由器ssid、password和服务器ip、端口号等。模块内置两种配置方式：

​	      1、兼容配对模式：移动终端作为station加入该AP组成局域网实现数据交互。快速配对模式（G状态，

​	      详情见4.2 Wi-Fi状态灯闪烁方式说明）下长按配置按键5S，设备进入兼容配对模式。点击易微联APP

       添 加设备（iOS移动终端需在“设置”菜单内手动连接ssid：ITEAD-10000XXXX， password12345678

       的热Android终端无需此操作），输入家庭路由器的ssid和password，完成设备的上线准备工作。

​	      2、快速配对模式：此方式Wi-Fi模块处于混杂模式（Wi-Fi Promiscuous），通过空快速配对模式：此方

       式Wi-Fi模块处于混杂模式（Wi-Fi Promiscuous），通过空空抓包的形式获取移动终端发出的包含ssid

       和password等信息的加密报文。上节所述A~D任意一个状态内长按配置按键5S，设备进入快速配对模

       式。点击易微联APP添加设备，输入家庭路由器的ssid和password，完成设备的上线配置工作。

​	

​	II． 上线

​	      设备模块从上电到连接服务器，需经历以下流程：

​		1、加入所配置路由器，连接Internet。

​		2、连接服务器。

​		3、注册设备，绑定至易微联账户。

​		4、获取设备应用参数，保持在线 。

​	      以上各个步骤，当连接/获取失败时，均有相应的退避策略和重连接机制，确保设备稳定、实时在线。



​	III． 升级

         模块设备连接升级服务器，下载更新至最新版本固件，实现设备的在线升级。



#### 4.4、定时器功能

​	          定时器功能通过APP配置，定时器分为以下四种:

1. 单次定时器：在指定时间执行操作。

2. 延时定时器：经过所设置的时间执行操作。

3. 循环定时器：周循环执行操作。

4. 重复定时器：日重复执行操作。

    

#### 4.5、定时功能说明

           SMA-CTA支持定时器操作，为了方便客户使用以及让其使用在更多的场景下，易微联APP提供了四种定时模式：

1. 单次定时：这个是最普通的定时设置，让用户可以设置这个设备的工作日程。比如那一天几点几分启动或者关

   闭，或者每周三几点几分启动或者关闭等。跟闹钟的设置类似，尤其是对重复在某些时刻要运行的设备，定时

   后使用起来非常方便。

2. 延时定时：延时是为了方便用户进行一次性快速的定时操作，比如在多久之后执行启动或者关闭的动作，可以

   非常方便的将某个设备打开后，让它运行一段时间然后关闭。本设备最多支持24小时的延时操作。	

3. 循环定时：对于某些设备，为了可以更方便的在某个场景下使用，易微联推出的循环定时设置，可以让一个设

   备从某个时刻开始，不断循环做一个事情。比如，让鱼缸的打氧泵从现在开始，每一小时启动一次，每次打氧

   20分钟后关闭，然后重复自动循环，保证鱼缸的氧气充足而无需人工干预。	

4. 重复定时：重复定时是方便无需在次日进行同时间设置定时操作。比如，设定上班时间闹钟，时间设置好后，

   选择日期（日期天数为一周可选），闹钟就会在选择的日期内设定的时间开启。

   

#### 4.6、透传功能

           模块可作为一个通用串口转Wi-Fi透传模块，将外部串行通信的简单设备实现在网络上的通信。以下是功能 

       说明：

-      作为APP端与外部MCU的桥梁，通过APP实现与服务器中心设备建立网络连接，可以自动完成串口到网络   

       通信的转换，所有数据可透明的在APP用于设备间双向传输。







## 五、WIFI射频指标

| 描述                               | 最小值 | 典型值 | 最大值 | 单位 |
| :--------------------------------- | :----: | :----: | :----: | :--: |
| 输入频率                           |  2412  |   -    |  2484  | MHz  |
| 输出阻抗                           |   -    |   50   |   -    |  Ω   |
| 输入反射                           |   -    |   -    |  -10   |  dB  |
| 72.2Mbps 下， PA 的输出峰值功率    |  15.5  |  16.5  |  17.5  | dbm  |
| 802.11b 模式下， PA 的输出峰值功率 |  19.5  |  20.5  |  21.5  | dbm  |

#### 	1 . 灵敏度

| 描述                          | 最小值 | 典型值 | 最大值 | 单位mA |
| ----------------------------- | ------ | :----: | ------ | :----: |
| CCK 1Mbps                     |        |  -98   |        |  dBm   |
| CCK 11Mbps                    |        |  -91   |        |  dBm   |
| 6Mbps(1/2BPSK)                |        |  -93   |        |  dBm   |
| 54Mbps(3/4 64-QAM)            |        |  -75   |        |  dBm   |
| HT20，MCS7（65Mbps，72.2Mbps) |        |  -72   |        |  dBm   |

#### 	2 . 邻频抑制

| 描述         | 最小值 | 典型值 | 最大值 | 单位mA |
| ------------ | ------ | :----: | ------ | :----: |
| OFDM，6Mbps  |        |   37   |        |   dB   |
| OFDM，54Mbps |        |   21   |        |   dB   |
| HT20，MCS0   |        |   37   |        |   dB   |
| HT20，MCS7   |        |   20   |        |   dB   |

        注：

            1、72.2Mbps是在802.11n模式下，MCS=7，GI=200uS时测得。

            2、802.11b模式下最高可达+21.5dBm的输出功率。







## 六、PCB设计



             **PCB layout 与模块布局** ：

             1、在 PCB layout 时注意模块摆放位置，特别是模块的天线部分，尽可能远离干扰源： 磁性元件(如马    

                    达、电感、变压器等)、高频信号器件（如晶振、高频时钟信号等）。

             2、模块的VCC供电的电源引脚的电容尽可能靠近模块的引脚摆放。







## 七、封装信息

​	

             封装尺寸图：



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/SMA%E6%A8%A1%E5%9D%97%E5%B0%81%E8%A3%85%E5%B0%BA%E5%AF%B8%E5%9B%BE.bmp)



​	



------





 

   



![图片描述](https://raw.githubusercontent.com/june0854/june0854.github.io/%E5%9B%BE%E7%89%87/%E7%89%88%E6%9D%83%E8%AF%B4%E6%98%8E.bmp )